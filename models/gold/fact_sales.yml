version: 2

models:

  - name: fact_sales
    description: Fact table containing sales information.
    columns:
      - name: sale_identifier_sk
        description: Unique identifier for each row on the fact table.
        tests:
          - not_null
          - unique

      - name: sales_order_fk
        description: Unique identifier for each order the fact table.
        tests:
          - not_null
          - unique

      - name: customer_fk
        description: Customer identifier.
        tests:
          - relationships:
              to: ref('dim_costumers')
              field: customer_sk

      - name: order_date
        description: Date of sale.
        tests:
          - relationships:
              to: ref('dim_dates')
              field: metric_date

      - name: due_date
        description: Date of due.
        tests:
          - relationships:
              to: ref('dim_dates')
              field: metric_date

      - name: ship_date
        description: Date of ship.
        tests:
          - relationships:
              to: ref('dim_dates')
              field: metric_date

      - name: status
        description: Status of sale.

      - name: online_order_flag
        description: If the sale was online or not.

      - name: sales_person_fk
        description: Sales person foreign key.
        tests:
          - relationships:
              to: ref('dim_workers')
              field: worker_sk 

      - name: bill_to_address_fk
        description: Bill to address foreign key.
        tests:
          - relationships:
              to: ref('dim_address')
              field: address_sk      

      - name: ship_to_address_fk
        description: Ship to address foreign key.
        tests:
          - relationships:
              to: ref('dim_address')
              field: address_sk      
 
      - name: product_fk
        description: Product foreign key.
        tests:
          - relationships:
              to: ref('dim_products')
              field: product_sk      
 
      - name: credit_card_fk
        description: Credit card foreign key.
        tests:
          - relationships:
              to: ref('dim_cards_type')
              field: credit_card_sk      

      - name: sub_total
        description: Subtotal of sale.

      - name: tax_amount
        description: Tax amount of sale.

      - name: freight
        description: Freight of sale.

      - name: total_due
        description: Total due of sale.
